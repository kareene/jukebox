(function(t){function e(e){for(var r,i,o=e[0],u=e[1],c=e[2],d=0,g=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&g.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(g.length)g.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var u=n[o];0!==s[u]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"562e":function(t,e,n){t.exports=n.p+"img/eq3.d1a782b3.gif"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-layout",attrs:{id:"app"}},[n("main-header"),n("router-view"),n("main-footer")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"main-header flex direction-column"},[n("div",{staticClass:"nav-container flex space-between"},[n("h1",{staticClass:"logo"},[t._v("JUKEBOX")]),n("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.submitSearch(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}}),t._m(0)]),n("nav",{staticClass:"flex align-center"},[n("router-link",{attrs:{to:"/",exact:""}},[t._v("Home")]),n("router-link",{attrs:{to:"/station"}},[t._v("Stations")]),n("router-link",{attrs:{to:"/about"}},[t._v("About")]),n("loggedin-user")],1),n("div",{staticClass:"screen",on:{click:t.toggleMenu}}),n("button",{staticClass:"menu-btn",on:{click:t.toggleMenu}},[t._v("☰")])]),n("div",{staticClass:"hero flex direction-column align-center",class:t.heroSize},[n("h2",[t._v("Make and Discover Playlists")]),n("router-link",{staticClass:"buttons",attrs:{to:"/station/edit"}},[t._v("Add New Station")])],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"searchButton",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-search"})])}],u=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedinUser?n("section",{staticClass:"loggedin-user"},[n("img",{attrs:{src:t.loggedinUser.imgUrl}}),n("div",{staticClass:"user-options"},[n("p",[t._v("Hello "+t._s(t.loggedinUser.fullName))]),t.isGuestUser?[n("router-link",{attrs:{to:"/login"}},[t._v("Login")]),n("router-link",{attrs:{to:"/signup"}},[t._v("Signup")])]:[n("router-link",{attrs:{to:"/user/"+t.loggedinUser._id}},[t._v("Profile Page")]),n("button",{on:{click:t.logout}},[t._v("Logout")])]],2)]):t._e()}),c=[],l={name:"loggedinUser",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser},isGuestUser:function(){return this.$store.getters.isGuestUser}},methods:{logout:function(){this.$store.dispatch({type:"logout"})}}},d=l,g=n("2877"),p=Object(g["a"])(d,u,c,!1,null,null,null),m=p.exports,f={name:"mainHeader",data:function(){return{isHomePage:!1,searchStr:""}},created:function(){this.isHomePage="homePage"==this.$route.name||"stationsPage"===this.$route.name},computed:{heroSize:function(){return this.isHomePage?"full":"small"}},methods:{toggleMenu:function(){document.body.classList.toggle("menu-open")},submitSearch:function(){this.$router.push({path:"/station",query:{searchTerm:this.searchStr}}),this.searchStr=""}},watch:{$route:function(t,e){this.isHomePage="homePage"===t.name||"stationsPage"===t.name}},components:{loggedinUser:m}},h=f,v=Object(g["a"])(h,i,o,!1,null,null,null),y=v.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"main-footer"},[n("small",[t._v("copyright © 2020")])])}],w={name:"mainFooter"},_=w,x=Object(g["a"])(_,S,b,!1,null,null,null),C=x.exports,P={created:function(){this.$store.dispatch({type:"loadStations"}),this.$store.dispatch({type:"loadTags"})},components:{mainHeader:y,mainFooter:C}},U=P,k=Object(g["a"])(U,s,a,!1,null,null,null),O=k.exports,R=n("9483");Object(R["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var $=n("8c4f"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"home-page content-container"},t._l(t.tags,(function(e){return n("section",{key:e,staticClass:"stations-by-tag"},[n("div",{staticClass:"tag-container flex space-between"},[n("h2",[t._v(t._s(e))]),n("router-link",{attrs:{to:{path:"/station",query:{tag:e}}}},[t._v("See More +")])],1),n("stationList",{attrs:{stations:t.getStationsByTag(e)}})],1)})),0)},T=[],N=(n("4de4"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.stations?n("ul",{staticClass:"station-list"},t._l(t.stations,(function(e){return n("station-preview",{key:e._id,attrs:{station:e},on:{remove:function(e){return t.$emit("remove",e)}}})})),1):t._e()}),I=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:"/station/"+t.station._id}},[t.station?n("li",{staticClass:"station-preview ratio-square"},[t.station.imgUrl?n("img",{attrs:{src:t.station.imgUrl}}):t._e(),n("div",{staticClass:"content flex direction-column space-between"},[n("div",{staticClass:"card-head"},[n("h3",{staticClass:"station-name"},[t._v(t._s(t.station.name))]),n("p",{staticClass:"station-creator"},[t._v("by "+t._s(t.station.createdBy.fullName))])]),n("i",{staticClass:"far fa-play-circle play preview-details"}),n("div",[n("small",[n("i",{staticClass:"fas fa-heart"}),t._v(" "+t._s(t.likesCount))]),n("small",[n("i",{staticClass:"far fa-clock"}),t._v(" "+t._s(t.songsCount)+" tracks")])])])]):t._e()])},E=[],B={props:{station:Object},computed:{likesCount:function(){return this.station.likedBy.length},songsCount:function(){return this.station.songs.length}}},A=B,L=Object(g["a"])(A,M,E,!1,null,null,null),D=L.exports,q={props:{stations:Array},components:{stationPreview:D}},V=q,F=Object(g["a"])(V,N,I,!1,null,null,null),G=F.exports,J={name:"homePage",created:function(){this.$store.dispatch({type:"loadTags"})},computed:{tags:function(){return this.$store.getters.tags}},methods:{getStationsByTag:function(t){return this.$store.getters.stations.filter((function(e){return e.tags.includes(t)}))}},components:{stationList:G}},z=J,H=Object(g["a"])(z,j,T,!1,null,null,null),W=H.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"about-page content-container"},[n("h2",[t._v("About Page")]),n("h3",[t._v("Rotem, Kareene, Limor")]),n("pre",[t._v(t._s(t.loggedinUser))])])},X=[],Q={name:"aboutPage",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser}}},Y=Q,Z=Object(g["a"])(Y,K,X,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"stations-page content-container"},[n("h2",[t._v("Stations Page")]),n("router-link",{attrs:{to:"/station/edit"}},[t._v("Add New Station")]),t.isStationLoaded?n("station-list",{attrs:{stations:t.stations}}):t._e()],1)},nt=[],rt=(n("96cf"),n("1da1")),st=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("99af"),n("bc3a")),at=n.n(st),it="/api/",ot=at.a.create({withCredentials:!0}),ut={get:function(t,e){return ct(t,"GET",e)},post:function(t,e){return ct(t,"POST",e)},put:function(t,e){return ct(t,"PUT",e)},delete:function(t,e){return ct(t,"DELETE",e)}};function ct(t){return lt.apply(this,arguments)}function lt(){return lt=Object(rt["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",r=a.length>2&&void 0!==a[2]?a[2]:null,t.prev=2,t.next=5,ot({url:"".concat(it).concat(e),method:n,data:r});case 5:return s=t.sent,t.abrupt("return",s.data);case 9:t.prev=9,t.t0=t["catch"](2),401===t.t0.response.status&&Je.push("/");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),lt.apply(this,arguments)}var dt={query:gt,getTags:pt,getById:mt,remove:ht,save:vt,getEmptyStation:yt,getEmptyFilter:ft};function gt(t){var e=new URLSearchParams(t);return console.log("station?".concat(e)),ut.get("station?".concat(e))}function pt(){return ut.get("station/tag")}function mt(t){return ut.get("station/".concat(t))}function ft(){return{name:"",tag:"",createdBy:"",_sort:"name",_order:1}}function ht(t){return ut.delete("station/".concat(t))}function vt(t){return t._id?ut.put("station/".concat(t._id),t):ut.post("station",t)}function yt(){return{name:"",imgUrl:"",tags:[],likedBy:[],songs:[],chatMsgs:[]}}var St={name:"stationPage",data:function(){return{isStationLoaded:!1}},created:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in n=t.$route.query,r=dt.getEmptyFilter(),n)"searchTerm"===s?(r.name=n[s],r.createdBy=n[s]):r[s]=n[s];return e.next=5,t.$store.dispatch({type:"setFilterBy",filterBy:r});case 5:t.isStationLoaded=!0;case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){var t=dt.getEmptyFilter();this.$store.dispatch({type:"setFilterBy",filterBy:t})},computed:{stations:function(){return this.$store.getters.stations}},components:{stationList:G}},bt=St,wt=Object(g["a"])(bt,et,nt,!1,null,null,null),_t=wt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.station?n("article",{staticClass:"station-edit"},[n("header",{staticClass:"edit-header"},[n("h2",[t._v(" "+t._s(t.station._id?"Edit":"Add")+" station : "),t.station.name?n("span",[t._v(t._s(t.station.name))]):t._e()]),n("div",{staticClass:"ratio-square img-container"},[t.station.imgUrl?n("img",{attrs:{src:t.station.imgUrl}}):t._e()])]),n("div",{staticClass:"edit-form"},[n("section",{staticClass:"change-name"},[n("label",[t._v("Enter station name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{change:t.setStationName,input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("section",{staticClass:"change-tags"},[t.station._id?n("label",[t._v("Tags:")]):t._e(),n("ul",{staticClass:"tags-list"},t._l(t.station.tags,(function(e){return n("li",{key:e,staticClass:"li-tag buttons",attrs:{"data-hover":"Remove"},on:{click:function(n){return t.removeTag(e)}}},[t._v(t._s(e))])})),0),n("div",{staticClass:"add-tags"},[t._v(" Add tags: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],attrs:{type:"text",list:"tags"},domProps:{value:t.tag},on:{change:t.addTag,input:function(e){e.target.composing||(t.tag=e.target.value)}}}),n("datalist",{attrs:{id:"tags"}},t._l(t.tags,(function(e){return n("option",{key:e},[t._v(t._s(e))])})),0)])]),n("section",{staticClass:"songs-add-sec"},[n("h2",[t._v("Add a great song")]),n("songAdd",{staticClass:"add-song-edit song-add-in-edit",on:{"add-song":t.addSong}})],1),n("songList",{staticClass:"song-list-edit",attrs:{songs:t.station.songs},on:{"update-playlist":t.updatePlaylist}}),n("section",{staticClass:"add-img-sec"},[n("label",{attrs:{for:"img"}},[t._v("Enter station picture:")]),n("input",{attrs:{type:"file",id:"station-img",name:"station.imgUrl",accept:"image/*"},on:{change:t.setStationImage}})]),n("button",{staticClass:"edit-btn buttons",on:{click:t.saveStation}},[t._v(t._s(t.station._id?"Edit":"Add"))])],1)]):t._e()},Ct=[],Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.songs?r("section",{staticClass:"song-list"},[r("Container",{staticClass:"container-of-song-list",attrs:{"remove-on-drop-out":!0},on:{drop:t.onDrop}},t._l(t.songsCopy,(function(e){return r("Draggable",{key:e.id},[r("article",{staticClass:"song-in-list",class:{playing:e.id===t.playingSongId}},[r("section",{staticClass:"left-sec-song-line"},[t.playingSongId?r("i",{staticClass:"far fa-play-circle play-on-img",on:{click:function(n){return n.stopPropagation(),t.playSong(e)}}}):t._e(),r("img",{attrs:{src:e.imgUrl}}),r("div",{staticClass:"inner-txt-song"},[r("p",[t._v(t._s(e.title))]),r("p",{staticClass:"song-add-by-name"},[t._v("Added by: "+t._s(e.addedBy.fullName))])])]),e.id===t.playingSongId&&t.isSongPlaying?r("img",{staticClass:"playing-song-gif",attrs:{src:n("562e")}}):t._e()])])})),1)],1):t._e()},Ut=[],kt=n("3f7d"),Ot=(n("a434"),n("2909")),Rt=function(t,e){var n=e.removedIndex,r=e.addedIndex,s=e.payload;if(null===n&&null===r)return t;var a=Object(Ot["a"])(t),i=s;return null!==n&&(i=a.splice(n,1)[0]),null!==r&&a.splice(r,0,i),a},$t=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}},jt={name:"songList",props:{songs:Array,playingSongId:String,isSongPlaying:Boolean},data:function(){return{songsCopy:JSON.parse(JSON.stringify(this.songs))}},watch:{songs:function(){this.songsCopy=JSON.parse(JSON.stringify(this.songs))}},methods:{onDrop:function(t){var e=Rt(this.songsCopy,t);this.$emit("update-playlist",e)},playSong:function(t){this.$emit("play-song",t)},removeSong:function(t){this.$emit("remove-song",t)}},components:{Container:kt["Container"],Draggable:kt["Draggable"]}},Tt=jt,Nt=Object(g["a"])(Tt,Pt,Ut,!1,null,null,null),It=Nt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"song-add"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.searchForSongs(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],attrs:{type:"text"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}}),n("button",{staticClass:"search-btn buttons"},[t._v("Search")])]),t.songSearchResults.length?n("section",{staticClass:"songs-list-in-search"},t._l(t.songSearchResults,(function(e){return n("ul",{key:e.id},[n("li",[n("img",{attrs:{src:e.imgUrl}}),n("p",[t._v(t._s(e.title))]),n("button",{staticClass:"fas fa-plus",on:{click:function(n){return n.stopPropagation(),t.addSong(e)}}})])])})),0):t._e()])},Et=[],Bt=(n("c740"),n("d81d"),{getVideoSearchResults:At});function At(t){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(rt["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,a,i,o,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="AIzaSyDyXgfPxeA2-fcfrl9HEuVQnfNo5lVrjGU",r="https://www.googleapis.com/youtube/v3/search",s="id,snippet",a="video",i=10,o="musicvideo "+e,t.next=8,at.a.get("".concat(r,"?part=").concat(s,"&maxResults=").concat(i,"&type=").concat(a,"&q=").concat(o,"&key=").concat(n));case 8:return u=t.sent,c=u.data.items.map((function(t){return{id:t.id.videoId,title:Dt(t.snippet.title),imgUrl:t.snippet.thumbnails.medium.url}})),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)}))),Lt.apply(this,arguments)}function Dt(t){var e=new DOMParser,n=e.parseFromString("<!doctype html><body>"+t,"text/html");return n.body.textContent}var qt={name:"songAdd",data:function(){return{searchStr:"",songSearchResults:[]}},methods:{searchForSongs:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Bt.getVideoSearchResults(t.searchStr);case 2:t.songSearchResults=e.sent;case 3:case"end":return e.stop()}}),e)})))()},addSong:function(t){this.$emit("add-song",t);var e=this.songSearchResults.findIndex((function(e){return e.id===t.id}));-1!==e&&this.songSearchResults.splice(e,1)}}},Vt=qt,Ft=Object(g["a"])(Vt,Mt,Et,!1,null,null,null),Gt=Ft.exports,Jt={uploadImg:zt};function zt(t){var e="dpjz7lloq",n="pjoqxv8c",r="https://api.cloudinary.com/v1_1/".concat(e,"/image/upload"),s=new FormData;return s.append("file",t),s.append("upload_preset",n),fetch(r,{method:"POST",body:s}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return console.error(t)}))}var Ht,Wt={name:"stationEdit",data:function(){return{name:"",tag:""}},created:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadStation();case 2:t.station.createdBy&&!t.isStationCreator&&t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit({type:"unsetStation"})},computed:{station:function(){return this.$store.getters.currStation},tags:function(){return this.$store.getters.tags},isStationCreator:function(){return!this.$store.getters.isGuestUser&&this.station.createdBy._id===this.$store.getters.loggedinUser._id}},methods:{loadStation:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:t.name=t.station.name;case 4:case"end":return e.stop()}}),e)})))()},addSong:function(t){this.$store.commit({type:"addSong",song:t})},updatePlaylist:function(t){this.$store.commit({type:"updatePlaylist",songs:t})},addTag:function(){this.tag&&!this.station.tags.includes(this.tag)&&this.$store.commit({type:"addTag",tag:this.tag}),this.tag=""},removeTag:function(t){this.$store.commit({type:"removeTag",tag:t})},setStationImage:function(t){var e=this;return Object(rt["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.target.files[0],r){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Jt.uploadImg(r);case 5:s=n.sent,e.$store.commit({type:"setStationImg",imgUrl:s.secure_url});case 7:case"end":return n.stop()}}),n)})))()},setStationName:function(){this.name&&this.$store.commit({type:"setStationName",name:this.name})},saveStation:function(){var t="https://res.cloudinary.com/dpjz7lloq/image/upload/v1585406955/pp0wanpilvrujnlfntpu.jpg";this.station.imgUrl||this.$store.commit({type:"setStationImg",imgUrl:t}),this.$store.dispatch({type:"saveStation",station:this.station}),this.$router.push("/")}},components:{songList:It,songAdd:Gt}},Kt=Wt,Xt=Object(g["a"])(Kt,xt,Ct,!1,null,null,null),Qt=Xt.exports,Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.station?r("article",{staticClass:"station-details flex direction-column"},[r("header",{staticClass:"station-details-header"},[r("div",{staticClass:"img-container ratio-square"},[r("img",{staticClass:"station-img",attrs:{src:t.station.imgUrl}})]),r("section",{staticClass:"info-station-sec"},[r("h2",[t._v(t._s(t.station.name))]),r("h3",[t._v(t._s(t.station.createdBy.fullName)+" add img of creator")]),t.isStationCreator?r("router-link",{attrs:{to:"/station/edit/"+t.station._id}},[t._v("Edit station")]):t._e()],1),r("div",{staticClass:"sation-stats flex direction-column"},[r("ul",{staticClass:"tags-list"},t._l(t.station.tags,(function(e){return r("li",{key:e,staticClass:"li-tag buttons"},[t._v(t._s(e))])})),0),r("div",{staticClass:"likes-and-views-container"},[r("h4",{attrs:{title:"click to like!"}},[r("button",{staticClass:"like-btn fas fa-heart",on:{click:t.addLike}}),t._v(" "+t._s(t.likedCount)+" ")]),t._m(0)])])]),r("section",{staticClass:"playlist-chat-container flex"},[!t.chatIsOn||t.chatIsOn&&!t.mobileMode?r("section",{staticClass:"songs-sec"},[r("button",{staticClass:"add-button buttons",on:{click:t.toggleAddSong}},[t._v(t._s(t.listOrAddBtn))]),t.isAddSongOpen?r("songAdd",{on:{"add-song":t.addSong}}):r("songList",{attrs:{songs:t.station.songs,playingSongId:t.playingSongId,isSongPlaying:t.isSongPlaying},on:{"play-song":function(e){return t.newSongPlayed(e,!0)},"update-playlist":t.playlistUpdated}})],1):t._e(),t.chatIsOn||!t.mobileMode?r("chat-room",{attrs:{mobileMode:t.mobileMode,currStation:t.station},on:{chatClosed:t.toggleChat}}):t._e(),t.mobileMode&&!t.chatIsOn?r("div",{staticClass:"chat-open",on:{click:t.toggleChat}},[t._m(1)]):t._e()],1),r("article",{staticClass:"player-container flex space-around"},[r("section",{staticClass:"video-control-container"},[r("p",[t._v("Now playing: "),t.playingSong?r("span",[t._v(t._s(t.playingSong.title))]):t._e()]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.playerProgress,expression:"playerProgress"}],attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.playerProgress},on:{change:t.songTimeUpdated,mousedown:t.stopProgress,mouseup:t.startProgress,touchstart:t.stopProgress,touchend:t.startProgress,__r:function(e){t.playerProgress=e.target.value}}}),r("section",{staticClass:"video-btns-container"},[r("button",{staticClass:"next-song-btn video-btns",on:{click:function(e){return t.newSongPlayed(t.prevSong,!0)}}},[r("i",{staticClass:"fas fa-backward"})]),t.isSongPlaying?r("button",{staticClass:"play-song-btn video-btns",on:{click:t.songToggled}},[r("i",{staticClass:"fas fa-pause"})]):r("button",{staticClass:"play-song-btn video-btns",on:{click:t.songToggled}},[r("i",{staticClass:"fas fa-play"})]),r("button",{staticClass:"prev-song-btn video-btns",on:{click:function(e){return t.newSongPlayed(t.nextSong,!0)}}},[r("i",{staticClass:"fas fa-forward"})])]),r("section",{staticClass:"audio-controls"},[r("button",{staticClass:"video-btns",on:{click:t.toggleMute}},[t.isPlayerMuted?r("i",{staticClass:"fas fa-volume-mute"}):r("i",{staticClass:"fas fa-volume-up"})]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.playerVolume,expression:"playerVolume"}],attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.playerVolume},on:{input:t.updatePlayerVolume,__r:function(e){t.playerVolume=e.target.value}}})])]),r("section",{staticClass:"video-sec"},[r("img",{staticClass:"needle",attrs:{src:n("f424")}}),r("div",{staticClass:"video-container ratio-square"},[r("youtube",{ref:"youtube",attrs:{width:"100%",height:"100%","player-vars":t.playerVars},on:{ready:t.initPlayer,ended:function(e){return t.newSongPlayed(t.nextSong,!1)},playing:t.youtubePlaying,paused:t.youtubePaused}})],1),r("div",{staticClass:"vinyl"})])])]):t._e()},Zt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",{attrs:{title:"views"}},[n("label",{staticClass:"far fa-eye"}),t._v(" 840 ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",[n("i",{staticClass:"far fa-comments"})])}],te=n("8055"),ee=n.n(te),ne="/",re={setup:se,terminate:ae,on:ie,off:oe,emit:ue};function se(){Ht=ee()(ne)}function ae(){Ht=null}function ie(t,e){Ht.on(t,e)}function oe(t,e){Ht.off(t,e)}function ue(t,e){Ht.emit(t,e)}var ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isChatOpen?n("aside",{staticClass:"chat-room"},[n("header",{staticClass:"chat-header"},[t._v("Chat "),t.mobileMode?n("button",{staticClass:"fas fa-times",on:{click:function(e){t.closeChat&&t.$emit("chatClosed",!1)}}}):t._e()]),n("section",{ref:"msgsContainer",staticClass:"msgs-sec"},[n("label",{style:{visibility:t.userTyping?"visible":"hidden"}},[t._v(t._s(t.userTyping)+" is Typing...")]),t._l(t.messages,(function(e,r){return n("div",{key:r,staticClass:"chat-msg-line",class:[e.user===t.currUser?"user-msg-bubble":"others-msg-bubble"]},[n("label",{staticClass:"user-name-title"},[t._v(t._s(e.user)+":")]),n("div",[t._v(t._s(e.txt))])])}))],2),n("form",{staticClass:"chat-room-form",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage.txt,expression:"newMessage.txt"}],staticClass:"chat-input",attrs:{type:"text",placeholder:"Enter your massage here..."},domProps:{value:t.newMessage.txt},on:{input:[function(e){e.target.composing||t.$set(t.newMessage,"txt",e.target.value)},t.sendTyping]}}),n("button",{staticClass:"send-mgs-btn buttons"},[t._v("Send")])])]):t._e()},le=[],de={name:"chatRoom",props:{currStation:Object,mobileMode:Boolean},data:function(){return{currUser:"",newMessage:{txt:"",user:""},messages:[],userTyping:"",timeout:null,isChatOpen:!0}},computed:{msgsContainer:function(){return this.$refs.msgsContainer},loggedinUser:function(){return this.$store.getters.loggedinUser.fullName},username:function(){return this.loggedinUser?this.loggedinUser:"Guest"}},created:function(){re.on("chat addMsg",this.addMsg),re.on("chat displayTyping",this.displayTyping)},destroyed:function(){re.off("chat addMsg",this.addMsg),re.off("chat displayTyping",this.displayTyping)},methods:{scrollToBottom:function(){this.msgsContainer.scrollTop=this.msgsContainer.scrollHeight},addMsg:function(t){var e=this;this.messages.push(t),setTimeout((function(){e.scrollToBottom()}),100)},sendMsg:function(){this.newMessage.txt&&(this.newMessage.user=this.username,this.currUser=this.newMessage.user,re.emit("chat newMsg",this.newMessage),this.newMessage.txt="")},sendTyping:function(){re.emit("chat userTyping",this.username)},displayTyping:function(t){var e=this;this.userTyping=t,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.userTyping=""}),1e3)},closeChat:function(t){this.isChatOpen=!1}}},ge=de,pe=Object(g["a"])(ge,ce,le,!1,null,null,null),me=pe.exports,fe={name:"stationDetails",data:function(){return{windowWidth:0,mobileMode:!1,playingSong:null,songDuration:0,playerProgress:0,playerVars:{controls:0,disablekb:1},playerVolume:100,isPlayerMuted:!1,isAddSongOpen:!1,isSongPlaying:!1,interval:null,chatIsOn:!1}},created:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return re.setup(),window.addEventListener("resize",t.handleResize),t.handleResize(),e.next=5,t.loadStation();case 5:re.emit("joinStation",{stationId:t.station._id,user:t.loggedinUser}),re.on("player updatePlaylist",t.updatePlaylist),re.on("player pauseSong",t.pauseSong),re.on("player playSong",t.playSong),re.on("player updateSongTime",t.updateSongTime),re.on("player playNewSong",t.playNewSong);case 11:case"end":return e.stop()}}),e)})))()},destroyed:function(){re.off("playlist updatePlaylist",this.updatePlaylist),re.off("player pauseSong",this.pauseSong),re.off("player playSong",this.playSong),re.off("player updateSongTime",this.updateSongTime),re.off("player playNewSong",this.playNewSong),re.terminate(),this.$store.commit({type:"unsetStation"}),window.removeEventListener("resize",this.handleResize)},computed:{station:function(){return this.$store.getters.currStation},loggedinUser:function(){return this.$store.getters.loggedinUser},isStationCreator:function(){return!this.$store.getters.isGuestUser&&this.station.createdBy._id===this.loggedinUser._id},likedCount:function(){return this.station.likedBy.length},player:function(){return this.$refs.youtube.player},playingSongId:function(){return this.playingSong?this.playingSong.id:""},nextSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSong.id}));return e++,e===this.station.songs.length&&(e=0),this.station.songs[e]},prevSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSong.id}));return e--,e<0&&(e=this.station.songs.length-1),this.station.songs[e]},listOrAddBtn:function(){return this.isAddSongOpen?"Return to playlist":"Add a new song"}},methods:{handleResize:function(){this.windowWidth=window.innerWidth,this.windowWidth>740?this.mobileMode=!1:this.mobileMode=!0},loadStation:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:case"end":return e.stop()}}),e)})))()},youtubePlaying:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSongPlaying=!0,e.next=3,t.player.getDuration();case 3:t.songDuration=e.sent,t.startProgress();case 5:case"end":return e.stop()}}),e)})))()},youtubePaused:function(){this.isSongPlaying=!1,this.stopProgress()},startProgress:function(){this.interval&&clearInterval(this.interval),this.interval=setInterval(this.advancePlayerProgress,1e3)},stopProgress:function(){clearInterval(this.interval)},advancePlayerProgress:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.player.getCurrentTime();case 2:n=e.sent,t.playerProgress=n/t.songDuration*100;case 4:case"end":return e.stop()}}),e)})))()},initPlayer:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:re.emit("player firstSongRequsted"),setTimeout((function(){t.playingSong||t.playNewSong()}),3e3);case 2:case"end":return e.stop()}}),e)})))()},newSongPlayed:function(t,e){this.playNewSong(t),re.emit("player newSongPlayed",{song:t,userInitiated:e})},toggleMute:function(){this.isPlayerMuted?this.player.unMute():this.player.mute(),this.isPlayerMuted=!this.isPlayerMuted},updatePlayerVolume:function(){this.player.setVolume(this.playerVolume)},playNewSong:function(t){this.playerProgress=0,this.playingSong=t||this.station.songs[0],this.player.loadVideoById(this.playingSong.id)},songToggled:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.player.getPlayerState();case 2:n=e.sent,1===n?(t.pauseSong(),re.emit("player songPaused")):2===n&&(t.playSong(),re.emit("player songPlayed"));case 4:case"end":return e.stop()}}),e)})))()},pauseSong:function(){this.player.pauseVideo()},playSong:function(){this.player.playVideo()},songTimeUpdated:function(){var t=this.playerProgress*this.songDuration/100;this.updateSongTime(t),re.emit("player songTimeUpdated",t)},updateSongTime:function(t){this.player.seekTo(t)},playlistUpdated:function(t){var e=this;return Object(rt["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.findIndex((function(t){return t.id===e.playingSong.id})),-1===r&&e.newSongPlayed(e.nextSong,!0),n.next=4,e.$store.dispatch({type:"updatePlaylist",songs:t});case 4:re.emit("player playlistUpdated",t);case 5:case"end":return n.stop()}}),n)})))()},updatePlaylist:function(t){this.$store.commit({type:"updatePlaylist",songs:t})},shuffleSongs:function(){var t=JSON.parse(JSON.stringify(this.station.songs));$t(t),this.playlistUpdated(t)},toggleAddSong:function(){this.isAddSongOpen=!this.isAddSongOpen},addSong:function(t){var e=this;return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.toggleAddSong(),n.next=3,e.$store.dispatch({type:"addSong",song:t});case 3:re.emit("player playlistUpdated",e.station.songs);case 4:case"end":return n.stop()}}),n)})))()},toggleChat:function(t){this.chatIsOn=!this.chatIsOn},addLike:function(){this.$store.dispatch({type:"addLike"})}},components:{songList:It,songAdd:Gt,chatRoom:me}},he=fe,ve=Object(g["a"])(he,Yt,Zt,!1,null,null,null),ye=ve.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-signup"},[n("h2",[t._v("User Sign Up")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.fullName,expression:"credentials.fullName"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:t.credentials.fullName},on:{input:function(e){e.target.composing||t.$set(t.credentials,"fullName",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",[t._v("Create Account")])]),n("p",[t._v("Already a member? "),n("router-link",{attrs:{to:"/login"}},[t._v("Go to login page")])],1)])},be=[],we={data:function(){return{credentials:{fullName:"",email:"",password:""}}},methods:{signup:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"signup",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},_e=we,xe=Object(g["a"])(_e,Se,be,!1,null,null,null),Ce=xe.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-login"},[n("h2",[t._v("User Login")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",[t._v("Login")])]),n("p",[t._v("Not a user yet? "),n("router-link",{attrs:{to:"/signup"}},[t._v("Create an account")])],1)])},Ue=[],ke={data:function(){return{credentials:{email:"",password:""}}},methods:{login:function(){var t=this;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"login",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},Oe=ke,Re=Object(g["a"])(Oe,Pe,Ue,!1,null,null,null),$e=Re.exports,je=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-management"},[n("h2",[t._v("User Management")])])}],Ne={name:"userManagement"},Ie=Ne,Me=Object(g["a"])(Ie,je,Te,!1,null,null,null),Ee=Me.exports,Be=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ae=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-profile"},[n("h2",[t._v("User Profile")])])}],Le={name:"userProfile"},De=Le,qe=Object(g["a"])(De,Be,Ae,!1,null,null,null),Ve=qe.exports;r["a"].use($["a"]);var Fe=[{path:"/",name:"homePage",component:W},{path:"/about",name:"aboutPage",component:tt},{path:"/station",name:"stationsPage",component:_t},{path:"/station/edit/:id?",name:"stationEdit",component:Qt},{path:"/station/:id",name:"stationDetails",component:ye},{path:"/signup",name:"userSignup",component:Ce},{path:"/login",name:"userLogin",component:$e},{path:"/user",name:"userManagement",component:Ee},{path:"/user/:id",name:"userProfile",component:Ve}],Ge=new $["a"]({mode:"history",base:"/",routes:Fe}),Je=Ge,ze=n("2f62"),He=n("ade3"),We={state:Object(He["a"])({stations:[],tags:[],filterBy:{name:"",tag:"",_sort:"name",_order:1},currStation:null},"tags",[]),getters:Object(He["a"])({stations:function(t){return t.stations},tags:function(t){return t.tags},currStation:function(t){return t.currStation},filterBy:function(t){return t.filterBy}},"tags",(function(t){return t.tags})),mutations:{setStations:function(t,e){var n=e.stations;t.stations=n},setTags:function(t,e){var n=e.tags;t.tags=n},setStation:function(t,e){var n=e.station;t.currStation=n},unsetStation:function(t){t.currStation=null},setFilterBy:function(t,e){var n=e.filterBy;t.filterBy=n},addStation:function(t,e){var n=e.station;t.stations.unshift(n)},removeStation:function(t,e){var n=e.stationId,r=t.stations.findIndex((function(t){return t._id===n}));-1!==r&&t.stations.splice(r,1)},updateStation:function(t,e){var n=e.station,r=t.stations.findIndex((function(t){return t._id===n._id}));-1!==r&&t.stations.splice(r,1,n)},addSong:function(t,e){var n=e.song,r=this.getters.loggedinUser;n.addedBy={_id:r._id,fullName:r.fullName,imgUrl:r.imgUrl},t.currStation.songs.push(n)},updatePlaylist:function(t,e){var n=e.songs;t.currStation.songs=n},addTag:function(t,e){var n=e.tag;t.currStation.tags.push(n),t.tags.includes(n)||t.tags.push(n)},removeTag:function(t,e){var n=e.tag,r=t.currStation.tags.findIndex((function(t){return t===n}));-1!==r&&t.currStation.tags.splice(r,1)},setStationName:function(t,e){var n=e.name;t.currStation.name=n},setStationImg:function(t,e){var n=e.imgUrl;t.currStation.imgUrl=n},addLike:function(t){t.currStation.likedBy.push(this.getters.loggedinUser)}},actions:{loadStations:function(t){return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt.query(t.getters.filterBy);case 2:return n=e.sent,t.commit({type:"setStations",stations:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadTags:function(t){return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt.getTags();case 2:return n=e.sent,t.commit({type:"setTags",tags:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadStation:function(t,e){var n=e.stationId;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,dt.getById(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=dt.getEmptyStation();case 7:return r=e.t0,t.commit({type:"setStation",station:r}),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))()},setFilterBy:function(t,e){return t.commit(e),t.dispatch({type:"loadStations"})},saveStation:function(t,e){var n=e.station;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),r=!!n._id,r||(s=t.getters.loggedinUser,n.createdBy={_id:s._id,fullName:s.fullName,imgUrl:s.imgUrl}),e.next=5,dt.save(n);case 5:return n=e.sent,r?t.commit({type:"updateStation",station:n}):t.commit({type:"addStation",station:n}),t.getters.isGuestUser||t.dispatch({type:"saveUserCreatedStation",station:n}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))()},removeStation:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,dt.remove(stationId);case 2:t.commit(e),t.getters.isGuestUser||t.dispatch({type:"removeUserCreatedStation",station:station});case 4:case"end":return n.stop()}}),n)})))()},addSong:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},updatePlaylist:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},addLike:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}},Ke={login:Xe,logout:Ye,signup:tn,getUsers:nn,getById:rn,remove:sn,update:an,getLoggedinUser:on};function Xe(t){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(rt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/login",e);case 2:return n=t.sent,t.abrupt("return",un(n));case 4:case"end":return t.stop()}}),t)}))),Qe.apply(this,arguments)}function Ye(){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(rt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return t.stop()}}),t)}))),Ze.apply(this,arguments)}function tn(t){return en.apply(this,arguments)}function en(){return en=Object(rt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/signup",e);case 2:return n=t.sent,t.abrupt("return",un(n));case 4:case"end":return t.stop()}}),t)}))),en.apply(this,arguments)}function nn(){return ut.get("user")}function rn(t){return ut.get("user/".concat(t))}function sn(t){return ut.delete("user/".concat(t))}function an(t){var e=on();return e._id===t._id&&sessionStorage.setItem("user",JSON.stringify(t)),ut.put("user/".concat(t._id),t)}function on(){var t=sessionStorage.getItem("user");return t?JSON.parse(t):{_id:"5e792fc31c9d4400009c8229",fullName:"guest",imgUrl:"../img/user-icon.png",isAdmin:!1}}function un(t){return sessionStorage.setItem("user",JSON.stringify(t)),t}var cn={state:{loggedinUser:Ke.getLoggedinUser(),users:[]},getters:{loggedinUser:function(t){return t.loggedinUser},users:function(t){return t.toys},isGuestUser:function(t,e){return"guest"===e.loggedinUser.fullName&&!e.loggedinUser.email}},mutations:{setUser:function(t,e){var n=e.user;t.loggedinUser=n},setUsers:function(t,e){var n=e.users;t.users=n},removeUser:function(t,e){var n=e.userId;t.users=t.users.filter((function(t){return t._id!==n}))},saveUserCreatedStation:function(t,e){var n=e.station,r={_id:n._id,name:n.name,imgUrl:n.imgUrl},s=t.loggedinUser.stations.findIndex((function(t){return t._id===n._id}));-1===s?t.loggedinUser.stations.unshift(r):t.loggedinUser.stations.splice(s,1,r)},removeUserCreatedStation:function(t,e){var n=e.stationId,r=t.loggedinUser.stations.findIndex((function(t){return t._id===n}));-1===r&&t.loggedinUser.stations.splice(r,1)}},actions:{login:function(t,e){var n=e.userCred;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.login(n);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:return t.commit({type:"setUser",user:r}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))()},signup:function(t,e){var n=e.userCred;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.signup(n);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:return t.commit({type:"setUser",user:r}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))()},logout:function(t){return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.logout();case 2:t.commit({type:"setUsers",users:[]}),t.commit({type:"setUser",user:Ke.getLoggedinUser()});case 4:case"end":return e.stop()}}),e)})))()},updateUser:function(t,e){var n=e.user;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.update(n);case 2:return n=e.sent,t.commit({type:"setUser",user:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadUsers:function(t){return Object(rt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.getUsers();case 2:return n=e.sent,t.commit({type:"setUsers",users:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},removeUser:function(t,e){var n=e.userId;return Object(rt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.remove(n);case 2:t.commit({type:"removeUser",userId:n});case 3:case"end":return e.stop()}}),e)})))()},saveUserCreatedStation:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"updateUser",user:t.getters.loggedinUser});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},removeUserCreatedStation:function(t,e){return Object(rt["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"updateUser",user:t.getters.loggedinUser});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}};r["a"].use(ze["a"]);var ln=new ze["a"].Store({strict:!0,modules:{stationStore:We,userStore:cn}}),dn=(n("efc1"),n("b7e3"),n("e0ec")),gn=n.n(dn);r["a"].use(gn.a),r["a"].config.productionTip=!1,new r["a"]({router:Je,store:ln,render:function(t){return t(O)}}).$mount("#app")},b7e3:function(t,e,n){},efc1:function(t,e,n){},f424:function(t,e,n){t.exports=n.p+"img/needl1.c066beab.png"}});
//# sourceMappingURL=app.14dbbc76.js.map