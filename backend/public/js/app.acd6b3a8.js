(function(t){function e(e){for(var r,o,i=e[0],u=e[1],c=e[2],d=0,g=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&g.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(g.length)g.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-layout",attrs:{id:"app"}},[n("main-header"),n("router-view"),n("main-footer")],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"main-header flex direction-column"},[n("div",{staticClass:"nav-container flex space-between"},[n("h1",[t._v("Jukebox")]),n("nav",[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),n("router-link",{attrs:{to:"/station"}},[t._v("Stations")]),t._v(" | "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1)]),n("loggedin-user"),n("div",{staticClass:"hero flex direction-column",class:t.heroSize},[n("h2",[t._v("Make and Discover Playlists")]),n("router-link",{attrs:{to:"/station/edit"}},[t._v("Add New Station")])],1)],1)},i=[],u=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedinUser?n("section",{staticClass:"loggedin-user"},[n("img",{attrs:{src:t.loggedinUser.imgUrl}}),n("div",{staticClass:"user-options"},[n("p",[t._v("Hello "+t._s(t.loggedinUser.fullName))]),t.loggedinUser.email?[n("router-link",{attrs:{to:"/user/"+t.loggedinUser._id}},[t._v("Profile Page")]),n("button",{on:{click:t.logout}},[t._v("Logout")])]:[n("router-link",{attrs:{to:"/login"}},[t._v("Login")]),n("router-link",{attrs:{to:"/signup"}},[t._v("Signup")])]],2)]):t._e()}),c=[],l={name:"loggedinUser",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser}},methods:{logout:function(){this.$store.dispatch({type:"logout"})}}},d=l,g=n("2877"),p=Object(g["a"])(d,u,c,!1,null,null,null),m=p.exports,f={name:"mainHeader",data:function(){return{isHomePage:!1}},created:function(){this.isHomePage="homePage"==this.$route.name||"stationsPage"===this.$route.name},computed:{heroSize:function(){return this.isHomePage?"full":"small"}},watch:{$route:function(t,e){this.isHomePage="homePage"===t.name||"stationsPage"===t.name}},components:{loggedinUser:m}},h=f,v=Object(g["a"])(h,o,i,!1,null,null,null),y=v.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"main-footer"},[n("small",[t._v("copyright Â© 2020")])])}],b={name:"mainFooter"},w=b,x=Object(g["a"])(w,S,_,!1,null,null,null),C=x.exports,O={created:function(){this.$store.dispatch({type:"loadStations"})},components:{mainHeader:y,mainFooter:C}},k=O,U=Object(g["a"])(k,s,a,!1,null,null,null),P=U.exports,$=n("9483");Object($["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var j=n("8c4f"),R=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"home-page"},[n("h2",[t._v("Home Page")])])}],I={name:"homePage"},T=I,A=Object(g["a"])(T,R,N,!1,null,null,null),E=A.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"about-page"},[n("h2",[t._v("About Page")]),n("h3",[t._v("Rotem, Kareene, Limor")]),n("pre",[t._v(t._s(t.loggedinUser))])])},B=[],D={name:"aboutPage",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser}}},L=D,H=Object(g["a"])(L,M,B,!1,null,null,null),q=H.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"stations-page"},[n("h2",[t._v("Stations Page")]),n("router-link",{attrs:{to:"/station/edit"}},[t._v("Add New Station")]),n("station-list",{attrs:{stations:t.stations}})],1)},F=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.stations?n("ul",{staticClass:"station-list"},t._l(t.stations,(function(e){return n("station-preview",{key:e._id,attrs:{station:e},on:{remove:function(e){return t.$emit("remove",e)}}})})),1):t._e()},z=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:"/station/"+t.station._id}},[t.station?n("li",{staticClass:"station-preview ratio-square"},[t.station.imgUrl?n("img",{attrs:{src:t.station.imgUrl}}):t._e(),n("div",{staticClass:"content flex direction-column"},[n("h3",{staticClass:"station-name"},[t._v(t._s(t.station.name))]),n("p",{staticClass:"station-creator"},[t._v("by "+t._s(t.station.createdBy.fullName))]),n("div",{staticClass:"preview-details"},[n("small",[n("i",{staticClass:"fas fa-heart"}),t._v(" "+t._s(t.likesCount))]),n("small",[n("i",{staticClass:"far fa-clock"}),t._v(" "+t._s(t.songsCount)+" tracks")])]),n("i",{staticClass:"far fa-play-circle play preview-details"})])]):t._e()])},K=[],Q={props:{station:Object},computed:{likesCount:function(){return this.station.likedBy.length},songsCount:function(){return this.station.songs.length}}},X=Q,W=Object(g["a"])(X,G,K,!1,null,null,null),Y=W.exports,Z={props:{stations:Array},components:{stationPreview:Y}},tt=Z,et=Object(g["a"])(tt,V,z,!1,null,null,null),nt=et.exports,rt={name:"stationPage",computed:{stations:function(){return this.$store.getters.stations}},components:{stationList:nt}},st=rt,at=Object(g["a"])(st,J,F,!1,null,null,null),ot=at.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currStation?n("article",{staticClass:"station-edit"},[n("h2",[t._v(" "+t._s(t.currStation._id?"Edit":"Add")+" station : "),t.currStation._id?n("span",[t._v(t._s(t.currStation.name))]):t._e()]),n("form",{staticClass:"edit-form",on:{submit:function(e){return e.preventDefault(),t.saveStation(e)}}},[n("section",{staticClass:"change-name"},[n("label",[t._v("Enter station name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.currStation.name,expression:"currStation.name"}],attrs:{type:"text"},domProps:{value:t.currStation.name},on:{input:function(e){e.target.composing||t.$set(t.currStation,"name",e.target.value)}}})]),n("section",{staticClass:"change-tags"},[t.currStation._id?n("label",[t._v("Tags:")]):t._e(),n("ul",{staticClass:"tags-list"},t._l(t.currStation.tags,(function(e){return n("li",{key:e,staticClass:"li-tag",attrs:{"data-hover":"Remove"},on:{click:function(n){return n.preventDefault(),t.removeTag(e)}}},[t._v(t._s(e))])})),0),n("div",{staticClass:"add-tags"},[t._v(" Add tags: "),n("input",{attrs:{list:"browsers",name:"browser"},on:{change:t.addNewTag}}),n("datalist",{attrs:{id:"browsers"}},t._l(t.currStation.tags,(function(t){return n("option",{key:t,domProps:{value:t}})})),0)])]),n("songList",{staticClass:"song-list-edit",attrs:{songs:t.currStation.songs}}),n("section",{staticClass:"songs-add-sec"},[n("songAdd",{staticClass:"add-song-edit",on:{"add-song":t.addSong}})],1),n("section",{staticClass:"add-img-sec"},[n("label",{attrs:{for:"img"}},[t._v("Enter station picture:")]),n("input",{attrs:{type:"file",id:"station-img",name:"station.imgUrl",accept:"image/*"},on:{change:t.addImage}})]),n("button",{staticClass:"edit-btn buttons"},[t._v(t._s(t.currStation._id?"Edit":"Add"))])],1),n("pre",[t._v(t._s(t.currStation))])]):t._e()},ut=[],ct=(n("c740"),n("a434"),n("96cf"),n("1da1")),lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.songs?n("section",{staticClass:"song-list "},[n("h2",[t._v("Songs list")]),n("Container",{attrs:{"remove-on-drop-out":!0},on:{drop:t.onDrop}},t._l(t.songsCopy,(function(e){return n("Draggable",{key:e.id},[n("article",{staticClass:"song-in-list",class:{playing:e.id===t.playingSongId}},[n("p",[t._v(t._s(e.title))]),t.playingSongId?n("button",{staticClass:"fas fa-play",on:{click:function(n){return n.stopPropagation(),t.playSong(e.id)}}}):t._e()])])})),1)],1):t._e()},dt=[],gt=n("3f7d"),pt=n("2909"),mt=function(t,e){var n=e.removedIndex,r=e.addedIndex,s=e.payload;if(null===n&&null===r)return t;var a=Object(pt["a"])(t),o=s;return null!==n&&(o=a.splice(n,1)[0]),null!==r&&a.splice(r,0,o),a},ft={name:"songList",props:{songs:Array,playingSongId:String},data:function(){return{songsCopy:JSON.parse(JSON.stringify(this.songs))}},watch:{songs:function(){this.songsCopy=JSON.parse(JSON.stringify(this.songs))}},methods:{onDrop:function(t){var e=mt(this.songsCopy,t);this.$emit("reorder-songs",e)},playSong:function(t){this.$emit("play-song",t)},removeSong:function(t){this.$emit("remove-song",t)}},components:{Container:gt["Container"],Draggable:gt["Draggable"]}},ht=ft,vt=Object(g["a"])(ht,lt,dt,!1,null,null,null),yt=vt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"song-add"},[n("h2",[t._v("Add a great song")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.searchForSongs(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],attrs:{type:"text"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}}),n("button",{staticClass:"search-btn buttons"},[t._v("Search")])]),t.songSearchResults.length?n("section",{staticClass:"songs-list-in-search"},t._l(t.songSearchResults,(function(e){return n("ul",{key:e.id},[n("li",[n("img",{attrs:{src:e.imgUrl}}),n("p",[t._v(t._s(e.title))]),n("button",{staticClass:"fas fa-plus",on:{click:function(n){return n.stopPropagation(),t.addSong(e)}}})])])})),0):t._e()])},_t=[],bt=(n("99af"),n("d81d"),n("bc3a")),wt=n.n(bt),xt={getVideoSearchResults:Ct};function Ct(t){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(ct["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,a,o,i,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="AIzaSyDyXgfPxeA2-fcfrl9HEuVQnfNo5lVrjGU",r="https://www.googleapis.com/youtube/v3/search",s="id,snippet",a="video",o=20,i="musicvideo "+e,t.next=8,wt.a.get("".concat(r,"?part=").concat(s,"&maxResults=").concat(o,"&type=").concat(a,"&q=").concat(i,"&key=").concat(n));case 8:return u=t.sent,c=u.data.items.map((function(t){return{id:t.id.videoId,title:kt(t.snippet.title),imgUrl:t.snippet.thumbnails.medium.url}})),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)}))),Ot.apply(this,arguments)}function kt(t){var e=new DOMParser,n=e.parseFromString("<!doctype html><body>"+t,"text/html");return n.body.textContent}var Ut,Pt={name:"songAdd",data:function(){return{searchStr:"",songSearchResults:[]}},methods:{searchForSongs:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xt.getVideoSearchResults(t.searchStr);case 2:t.songSearchResults=e.sent;case 3:case"end":return e.stop()}}),e)})))()},addSong:function(t){this.$emit("add-song",t);var e=this.songSearchResults.findIndex((function(e){return e.id===t.id}));-1!==e&&this.songSearchResults.splice(e,1)}}},$t=Pt,jt=Object(g["a"])($t,St,_t,!1,null,null,null),Rt=jt.exports,Nt=(n("d3b7"),function(t){var e="dpjz7lloq",n="pjoqxv8c",r="https://api.cloudinary.com/v1_1/".concat(e,"/image/upload"),s=new FormData;return s.append("file",t.target.files[0]),s.append("upload_preset",n),fetch(r,{method:"POST",body:s}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return console.error(t)}))}),It={name:"stationEdit",data:function(){return{currStation:null,tagToAdd:""}},created:function(){this.loadStation()},methods:{loadStation:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:r=e.sent,t.currStation=JSON.parse(JSON.stringify(r));case 5:case"end":return e.stop()}}),e)})))()},addNewTag:function(t){this.tagToAdd=t.target.value,this.currStation.tags.push(this.tagToAdd)},addSong:function(t){var e=this.$store.getters.loggedinUser;t.addedBy={_id:e._id,fullName:e.fullName,imgUrl:e.imgUrl},this.currStation.songs.unshift(t)},reorderSongs:function(t){this.currStation.songs=t},removeTag:function(t){var e=this.currStation.tags.findIndex((function(e){return e===t}));this.currStation.tags.splice(e,1)},clearInputs:function(){this.tagToAdd=""},addImage:function(t){var e=this;console.log(t),Nt(t).then((function(t){console.log(t),e.currStation.imgUrl=t.url}))},saveStation:function(){this.$store.dispatch({type:"saveStation",station:this.currStation}),this.clearInputs(),this.$router.push("/")}},components:{songList:yt,songAdd:Rt}},Tt=It,At=Object(g["a"])(Tt,it,ut,!1,null,null,null),Et=At.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.station?n("article",{staticClass:"station-details"},[n("header",{staticClass:"station-details-header"},[n("h2",[t._v(t._s(t.station.name))]),n("h3",[t._v("Created by: "+t._s(t.station.createdBy.fullName))]),n("h4",[t._v(t._s(t.station.tags.join(", ")))]),n("h4",[n("button",{staticClass:"like-btn fas fa-heart"}),t._v(" "+t._s(t.likedCount))])]),n("section",{staticClass:"video-sec"},[n("div",{staticClass:"video-container ratio-16-9"},[n("youtube",{ref:"youtube",attrs:{width:"100%",height:"100%"},on:{ready:t.loadSong,ended:t.playNextSong,playing:t.sendPlaying,paused:t.sendPaused}})],1),n("section",{staticClass:"video-btns-container"},[n("button",{staticClass:"next-song-btn video-btns",on:{click:t.playPrevSong}},[n("i",{staticClass:"fas fa-backward"})]),t.isSongPlaying?n("button",{staticClass:"play-song-btn video-btns fas fa-pause",on:{click:t.toggleSong}}):n("button",{staticClass:"play-song-btn video-btns fas fa-play",on:{click:t.toggleSong}}),n("button",{staticClass:"prev-song-btn video-btns",on:{click:t.playNextSong}},[n("i",{staticClass:"fas fa-forward"})])])]),n("section",{staticClass:"songs-sec"},[n("button",{staticClass:"add-button buttons",on:{click:t.toggleAddSong}},[t._v(t._s(t.listOrAddSong))]),t.isAddSongOpen?n("songAdd",{on:{"add-song":t.addSong}}):n("songList",{attrs:{songs:t.station.songs,playingSongId:t.playingSongId},on:{"play-song":t.playSong,"reorder-songs":t.reorderSongs}})],1),n("chat-room",{staticClass:"station-chat",attrs:{currStation:t.station}})],1):t._e()},Bt=[],Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"chat-room"},[n("section",{ref:"scrollToHere",staticClass:"msgs-sec"},[n("label",{style:{visibility:t.userTyping?"visible":"hidden"}},[t._v(t._s(t.userTyping)+" is Typing...")]),t._l(t.messages,(function(e,r){return n("div",{key:r,staticClass:"chat-msg-line",class:[e.user===t.currUser?"user-msg-bubble":"others-msg-bubble"]},[n("label",{staticClass:"user-name-title"},[t._v(t._s(e.user)+":")]),n("div",[t._v(t._s(e.txt))])])}))],2),n("form",{staticClass:"chat-room-form",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage.txt,expression:"newMessage.txt"}],staticClass:"chat-input",attrs:{type:"text",placeholder:"Enter your massage here..."},domProps:{value:t.newMessage.txt},on:{input:[function(e){e.target.composing||t.$set(t.newMessage,"txt",e.target.value)},t.sendTyping]}}),n("button",{staticClass:"send-mgs-btn buttons"},[t._v("Send")])])])},Lt=[],Ht=n("8055"),qt=n.n(Ht),Jt="/",Ft={setup:Vt,terminate:zt,on:Gt,off:Kt,emit:Qt};function Vt(){Ut=qt()(Jt)}function zt(){Ut=null}function Gt(t,e){Ut.on(t,e)}function Kt(t,e){Ut.off(t,e)}function Qt(t,e){Ut.emit(t,e)}var Xt={name:"chatRoom",props:{currStation:Object},data:function(){return{currUser:"",newMessage:{txt:"",user:""},messages:[],userTyping:"",timeout:null}},computed:{scrollToHere:function(){return this.$refs.scrollToHere},loggedinUser:function(){return this.$store.getters.loggedinUser.fullName},username:function(){return this.loggedinUser?this.loggedinUser:"Guest"}},created:function(){Ft.setup(),Ft.on("chat addMsg",this.addMsg),Ft.emit("chat room",this.currStation._id),Ft.on("chat displayTyping",this.displayTyping)},destroyed:function(){Ft.off("chat addMsg",this.addMsg),Ft.off("chat displayTyping",this.displayTyping),Ft.terminate()},methods:{scrollToBottom:function(){this.scrollToHere.scrollIntoView()},addMsg:function(t){this.messages.push(t),this.scrollToBottom()},sendMsg:function(){this.newMessage.txt&&(this.newMessage.user=this.username,this.currUser=this.newMessage.user,Ft.emit("chat newMsg",this.newMessage),this.newMessage.txt="")},sendTyping:function(){Ft.emit("chat userTyping",this.username)},displayTyping:function(t){var e=this;this.userTyping=t,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.userTyping=""}),1e3)}}},Wt=Xt,Yt=Object(g["a"])(Wt,Dt,Lt,!1,null,null,null),Zt=Yt.exports,te={name:"stationDetails",data:function(){return{playingSongId:"",isAddSongOpen:!1,isSongPlaying:!1}},created:function(){this.loadStation()},destroyed:function(){this.$store.commit({type:"unsetStation"})},computed:{station:function(){return this.$store.getters.currStation},likedCount:function(){return this.station.likedBy.length},player:function(){return this.$refs.youtube.player},listOrAddSong:function(){return this.isAddSongOpen?"Return to playlist":"Add a new song"}},methods:{loadStation:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:t.playingSongId=t.station.songs[0].id;case 4:case"end":return e.stop()}}),e)})))()},loadSong:function(){this.player.loadVideoById(this.playingSongId)},toggleSong:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.player.getPlayerState();case 2:n=e.sent,1===n?t.player.pauseVideo():2===n&&t.player.playVideo();case 4:case"end":return e.stop()}}),e)})))()},playSong:function(t){this.playingSongId=t,this.loadSong()},playNextSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSongId}));e++,e===this.station.songs.length&&(e=0),this.playingSongId=this.station.songs[e].id,this.loadSong()},playPrevSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSongId}));e--,e<0&&(e=this.station.songs.length-1),this.playingSongId=this.station.songs[e].id,this.loadSong()},sendPlaying:function(){this.isSongPlaying=!0},sendPaused:function(){this.isSongPlaying=!1},toggleAddSong:function(){this.isAddSongOpen=!this.isAddSongOpen},addSong:function(t){this.toggleAddSong(),this.$store.dispatch({type:"addSong",song:t})},reorderSongs:function(t){var e=this,n=t.findIndex((function(t){return t.id===e.playingSongId}));-1===n&&this.playNextSong(),this.$store.dispatch({type:"reorderSongs",songs:t})},shuffleSongs:function(){}},components:{songList:yt,songAdd:Rt,chatRoom:Zt}},ee=te,ne=Object(g["a"])(ee,Mt,Bt,!1,null,null,null),re=ne.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-signup"},[n("h2",[t._v("User Sign Up")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.fullName,expression:"credentials.fullName"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:t.credentials.fullName},on:{input:function(e){e.target.composing||t.$set(t.credentials,"fullName",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",[t._v("Create Account")])]),n("p",[t._v("Already a member? "),n("router-link",{attrs:{to:"/login"}},[t._v("Go to login page")])],1)])},ae=[],oe={data:function(){return{credentials:{fullName:"",email:"",password:""}}},methods:{signup:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"signup",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},ie=oe,ue=Object(g["a"])(ie,se,ae,!1,null,null,null),ce=ue.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-login"},[n("h2",[t._v("User Login")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",[t._v("Login")])]),n("p",[t._v("Not a user yet? "),n("router-link",{attrs:{to:"/signup"}},[t._v("Create an account")])],1)])},de=[],ge={data:function(){return{credentials:{email:"",password:""}}},methods:{login:function(){var t=this;return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"login",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},pe=ge,me=Object(g["a"])(pe,le,de,!1,null,null,null),fe=me.exports,he=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ve=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-management"},[n("h2",[t._v("User Management")])])}],ye={name:"userManagement"},Se=ye,_e=Object(g["a"])(Se,he,ve,!1,null,null,null),be=_e.exports,we=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},xe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-profile"},[n("h2",[t._v("User Profile")])])}],Ce={name:"userProfile"},Oe=Ce,ke=Object(g["a"])(Oe,we,xe,!1,null,null,null),Ue=ke.exports;r["a"].use(j["a"]);var Pe=[{path:"/",name:"homePage",component:E},{path:"/about",name:"aboutPage",component:q},{path:"/station",name:"stationsPage",component:ot},{path:"/station/edit/:id?",name:"stationEdit",component:Et},{path:"/station/:id",name:"stationDetails",component:re},{path:"/signup",name:"userSignup",component:ce},{path:"/login",name:"userLogin",component:fe},{path:"/user",name:"userManagement",component:be},{path:"/user/:id",name:"userProfile",component:Ue}],$e=new j["a"]({mode:"history",base:"/",routes:Pe}),je=$e,Re=n("2f62"),Ne=(n("3ca3"),n("ddb0"),n("2b3d"),"/api/"),Ie=wt.a.create({withCredentials:!0}),Te={get:function(t,e){return Ae(t,"GET",e)},post:function(t,e){return Ae(t,"POST",e)},put:function(t,e){return Ae(t,"PUT",e)},delete:function(t,e){return Ae(t,"DELETE",e)}};function Ae(t){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(ct["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",r=a.length>2&&void 0!==a[2]?a[2]:null,t.prev=2,t.next=5,Ie({url:"".concat(Ne).concat(e),method:n,data:r});case 5:return s=t.sent,t.abrupt("return",s.data);case 9:t.prev=9,t.t0=t["catch"](2),401===t.t0.response.status&&je.push("/");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),Ee.apply(this,arguments)}var Me={query:Be,getById:De,remove:Le,save:He};function Be(t){var e=new URLSearchParams(t);return Te.get("station?".concat(e))}function De(t){return t?Te.get("station/".concat(t)):Promise.resolve({name:"",imgUrl:"",tags:[],likedBy:[],songs:[],chatMsgs:[]})}function Le(t){return Te.delete("station/".concat(t))}function He(t){return t._id?Te.put("station/".concat(t._id),t):Te.post("station",t)}var qe={state:{stations:[],filterBy:{name:"",tag:"",_sort:"name",_order:1},currStation:null},getters:{stations:function(t){return t.stations},currStation:function(t){return t.currStation},filterBy:function(t){return t.filterBy}},mutations:{setStations:function(t,e){var n=e.stations;t.stations=n},setStation:function(t,e){var n=e.station;t.currStation=n},unsetStation:function(t){t.currStation=null},addStation:function(t,e){var n=e.station;t.stations.unshift(n)},updateStation:function(t,e){var n=e.station,r=t.stations.findIndex((function(t){return t._id===n._id}));-1!==r&&t.stations.splice(r,1,n)},addSong:function(t,e){var n=e.song,r=this.getters.loggedinUser;n.addedBy={_id:r._id,fullName:r.fullName,imgUrl:r.imgUrl},t.currStation.songs.push(n)},reorderSongs:function(t,e){var n=e.songs;t.currStation.songs=n},addTag:function(t,e){var n=e.tag;t.currStation.tags.push(n)},removeTag:function(t,e){var n=e.tag,r=t.currStation.tags.findIndex((function(t){return t===n}));t.currStation.tags.splice(r,1)}},actions:{loadStations:function(t){return Object(ct["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.query(t.getters.filterBy);case 2:return n=e.sent,t.commit({type:"setStations",stations:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadStation:function(t,e){var n=e.stationId;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.getById(n);case 2:return r=e.sent,t.commit({type:"setStation",station:r}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},saveStation:function(t,e){var n=e.station;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!!n._id,r||(s=t.getters.loggedinUser,n.createdBy={_id:s._id,fullName:s.fullName,imgUrl:s.imgUrl}),e.next=4,Me.save(n);case 4:n=e.sent,r?t.commit({type:"updateStation",station:n}):t.commit({type:"addStation",station:n});case 6:case"end":return e.stop()}}),e)})))()},addSong:function(t,e){t.commit(e),t.dispatch({type:"saveStation",station:t.getters.currStation})},reorderSongs:function(t,e){t.commit(e),t.dispatch({type:"saveStation",station:t.getters.currStation})}}},Je=(n("4de4"),{login:Fe,logout:ze,signup:Ke,getUsers:Xe,getById:We,remove:Ye,update:Ze,getLoggedinUser:tn});function Fe(t){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(ct["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Te.post("auth/login",e);case 2:return n=t.sent,t.abrupt("return",en(n));case 4:case"end":return t.stop()}}),t)}))),Ve.apply(this,arguments)}function ze(){return Ge.apply(this,arguments)}function Ge(){return Ge=Object(ct["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Te.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return t.stop()}}),t)}))),Ge.apply(this,arguments)}function Ke(t){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(ct["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Te.post("auth/signup",e);case 2:return n=t.sent,t.abrupt("return",en(n));case 4:case"end":return t.stop()}}),t)}))),Qe.apply(this,arguments)}function Xe(){return Te.get("user")}function We(t){return Te.get("user/".concat(t))}function Ye(t){return Te.delete("user/".concat(t))}function Ze(t){return Te.put("user/".concat(t._id),t)}function tn(){var t=sessionStorage.getItem("user");return t?JSON.parse(t):{_id:"5e792fc31c9d4400009c8229",fullName:"guest",imgUrl:"../img/user-icon.png"}}function en(t){return sessionStorage.setItem("user",JSON.stringify(t)),t}var nn={state:{loggedinUser:Je.getLoggedinUser(),users:[]},getters:{loggedinUser:function(t){return t.loggedinUser},users:function(t){return t.toys}},mutations:{setUser:function(t,e){var n=e.user;t.loggedinUser=n},setUsers:function(t,e){var n=e.users;t.users=n},removeUser:function(t,e){var n=e.userId;t.users=t.users.filter((function(t){return t._id!==n}))}},actions:{login:function(t,e){var n=e.userCred;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.login(n);case 2:return r=e.sent,t.commit({type:"setUser",user:r}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},signup:function(t,e){var n=e.userCred;return Object(ct["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.signup(n);case 2:return r=e.sent,t.commit({type:"setUser",user:r}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},logout:function(t){return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.logout();case 2:t.commit({type:"setUsers",users:[]}),t.commit({type:"setUser",user:Je.getLoggedinUser()});case 4:case"end":return e.stop()}}),e)})))()},updateUser:function(t,e){var n=e.user;return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.update(n);case 2:return n=e.sent,t.commit({type:"setUser",user:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadUsers:function(t){return Object(ct["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.getUsers();case 2:return n=e.sent,t.commit({type:"setUsers",users:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},removeUser:function(t,e){var n=e.userId;return Object(ct["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.remove(n);case 2:t.commit({type:"removeUser",userId:n});case 3:case"end":return e.stop()}}),e)})))()}}};r["a"].use(Re["a"]);var rn=new Re["a"].Store({strict:!0,modules:{stationStore:qe,userStore:nn}}),sn=(n("efc1"),n("b7e3"),n("e0ec")),an=n.n(sn);r["a"].use(an.a),r["a"].config.productionTip=!1,new r["a"]({router:je,store:rn,render:function(t){return t(P)}}).$mount("#app")},b7e3:function(t,e,n){},efc1:function(t,e,n){}});
//# sourceMappingURL=app.acd6b3a8.js.map